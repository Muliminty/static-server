import{r as a,j as e}from"./index-main-Dttrhsno.js";import{a as h,A as p}from"./apiConfig-CciPcZ7e.js";const $=async(s,o)=>{try{return(await h.post(`${p}/localFile/repo`,{owner:s,repo:o,type:"getRepoInfo"})).data}catch(r){throw console.error("Error fetching repo info:",r),r}},A=async(s,o,r)=>{console.log("filePath: ",r);try{return(await h.post(`${p}/localFile/repo`,{owner:s,repo:o,filePath:r,type:"getFileContent"})).data.content}catch(n){throw console.error("Error fetching file content:",n),n}},v=async(s,o)=>{try{return(await h.post(`${p}/localFile/repo`,{owner:s,repo:o,type:"getCommitHistory"})).data}catch(r){throw console.error("Error fetching commit history:",r),r}},D=async(s,o,r)=>{try{return(await h.post(`${p}/localFile/repo`,{owner:s,repo:o,folderPath:r,type:"getMarkdownFiles"})).data}catch(n){throw console.error("Error fetching Markdown files:",n),n}},P=async(s,o)=>{try{return(await h.post(`${p}/localFile/repo`,{owner:s,repo:o,type:"getRepoTree"})).data}catch(r){throw console.error("Error fetching repo tree:",r),r}},z=()=>{const s="Muliminty",o="Muliminty-Note",r="/CSS常见技巧",[n,w]=a.useState(null),[m,g]=a.useState(""),[F,C]=a.useState([]),[S,k]=a.useState([]),[M,E]=a.useState([]),[R,c]=a.useState(!1),[d,l]=a.useState(null),y=async()=>{try{c(!0);const t=await $(s,o);w(t)}catch{l("获取仓库信息失败")}finally{c(!1)}},f=async()=>{try{c(!0);const t=await P(s,o);E(t)}catch{l("获取仓库树形结构失败")}finally{c(!1)}},u=async()=>{try{c(!0);const t=await v(s,o);C(t)}catch{l("获取提交历史失败")}finally{c(!1)}},I=async t=>{try{c(!0);const i=await A(s,o,t);g(i)}catch{l("获取文件内容失败")}finally{c(!1)}},x=async()=>{try{c(!0);const t=await D(s,o,r);k(t)}catch{l("获取 Markdown 文件失败")}finally{c(!1)}},[j,H]=a.useState(!1),T=()=>{y(),f(),u(),x(),H(!0)};return a.useEffect(()=>{j||T()},[j]),e.jsxs("div",{children:[e.jsx("h1",{onClick:()=>{y(),f(),u(),x()},children:"API 测试"}),e.jsx("h2",{children:"GitHub 仓库博客"}),e.jsxs("section",{children:[e.jsx("h3",{children:"仓库信息"}),R?e.jsx("p",{children:"加载中..."}):d?e.jsx("p",{children:d}):n&&e.jsxs("div",{children:[e.jsxs("p",{children:["仓库名称: ",n.name]}),e.jsxs("p",{children:["描述: ",n.description]}),e.jsxs("p",{children:["Stars: ",n.stargazers_count]})]})]}),e.jsxs("section",{children:[e.jsx("h3",{children:"仓库树形结构"}),e.jsx("ul",{children:M.map(t=>e.jsx("li",{children:t.path},t.path))})]}),e.jsxs("section",{children:[e.jsx("h3",{children:"提交历史"}),e.jsx("ul",{children:F.map((t,i)=>e.jsx("li",{children:t.message},i))})]}),e.jsxs("section",{children:[e.jsx("h3",{children:"Markdown 文件列表"}),e.jsx("ul",{children:S.map((t,i)=>e.jsx("li",{onClick:()=>I(t.path),children:t.name},i))})]}),e.jsxs("section",{children:[e.jsx("h3",{children:"Markdown 文件内容"}),e.jsx("pre",{children:m})]})]})};export{z as default};
